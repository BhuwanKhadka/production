<odoo>
    <data>


<!--        <record model="ir.rule" id="stock.stock_production_lot_rule">-->
<!--            <field name="name">Stock Production Lot multi-company</field>-->
<!--            <field name="model_id" search="[('model','=','stock.production.lot')]" model="ir.model"/>-->
<!--            <field name="global" eval="True"/>-->
<!--            <field name="domain_force">[('company_id','in', company_ids)]</field>-->
<!--        </record>-->


        <record id="tree_view_move_line_tree_inherit_edit" model="ir.ui.view">
            <field name="name">name.stock.inventory.line.tree.edits</field>
            <field name="model">stock.move.line</field>
            <field name="inherit_id" ref="stock.view_move_line_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='lot_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

            </field>
        </record>


        <!-- Inherit Form View to Modify it -->
        <record id="view_move_line_form_inherit" model="ir.ui.view">
            <field name="name">view_move_line_form_inherit</field>
            <field name="model">stock.move.line</field>
            <field name="inherit_id" ref="stock.view_move_line_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='lot_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>

            </field>
        </record>


        <!-- Inherit Form View to Modify it -->
        <record id="form_view_stock_production_lot_inherit" model="ir.ui.view">
            <field name="name">name.stock.production.lot.edit.forms</field>
            <field name="model">stock.production.lot</field>
            <field name="inherit_id" ref="stock.view_production_lot_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='company_id']" position="attributes">
                    <attribute name="required">0</attribute>
                </xpath>
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="allowed_companies" widget="many2many_tags" force_save="1"/>
                    <!--                    <field name="allowed_companies"/>-->
                </xpath>


            </field>
        </record>


        <record id="stock.view_stock_move_line_operation_tree" model="ir.ui.view">
            <field name="name">stock.move.line.operations.tree</field>
            <field name="model">stock.move.line</field>
            <field name="priority">1000</field>
            <field name="arch" type="xml">
                <tree editable="bottom" decoration-muted="state == 'done' and is_locked == True"
                      decoration-success="product_uom_qty==qty_done"
                      decoration-danger="qty_done &gt; product_uom_qty and state != 'done' and picking_code != 'incoming'">
                    <field name="company_id" invisible="1" force_save="1"/>
                    <field name="picking_id" invisible="1" force_save="1"/>
                    <field name="move_id" invisible="1" force_save="1"/>
                    <field name="picking_code" invisible="1"/>
                    <field name="product_id" invisible="1"/>
                    <field name="package_level_id" invisible="1"/>
                    <!--                    <field name="company_ids"/>-->
                    <field name="location_id" options="{'no_create': True}"
                           attrs="{'readonly': ['&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           invisible="not context.get('show_source_location')"
                           domain="[('id', 'child_of', parent.location_id), '|', ('company_id', '=', False), ('company_id', '=', company_id)]"
                           groups="stock.group_stock_multi_locations"/>
                    <field name="location_dest_id" width="0.75"
                           attrs="{'readonly': ['&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           invisible="not context.get('show_destination_location')"
                           domain="[('id', 'child_of', parent.location_dest_id), '|', ('company_id', '=', False), ('company_id', '=', company_id)]"
                           groups="stock.group_stock_multi_locations"/>
                    <field name="lot_id" groups="stock.group_production_lot"
                           attrs="{'readonly': ['&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           invisible="not context.get('show_lots_m2o')"
                           context="{
                            'active_picking_id': picking_id,
                            'default_company_id': parent.company_id,
                            'default_product_id': parent.product_id,
                        }"
                    />
                    <field name="lot_name" widget="text" groups="stock.group_production_lot"
                           placeholder="Write your SN/LN one by one or copy paste a list."
                           attrs="{'readonly': ['&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           invisible="not context.get('show_lots_text')"/>
                    <field name="package_id"
                           attrs="{'readonly': ['&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           invisible="not context.get('show_package')" groups="stock.group_tracking_lot"/>
                    <field name="result_package_id"
                           attrs="{'readonly': ['&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           groups="stock.group_tracking_lot"/>
                    <field name="owner_id"
                           attrs="{'readonly': ['&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           invisible="not context.get('show_owner')" groups="stock.group_tracking_owner"/>
                    <field name="is_initial_demand_editable" invisible="1"/>
                    <field name="product_uom_qty" invisible="not context.get('show_reserved_quantity')" readonly="1"/>
                    <field name="state" invisible="1"/>
                    <field name="is_locked" invisible="1"/>
                    <field name="picking_code" invisible="1"/>
                    <field name="qty_done"
                           attrs="{'readonly': ['|', '|', ('is_initial_demand_editable', '=', True), '&amp;', ('state', '=', 'done'), ('is_locked', '=', True), '&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"/>
                    <field name="product_uom_id" options="{'no_open': True, 'no_create': True}"
                           attrs="{'readonly': ['|', ('product_uom_qty', '!=', 0.0), '&amp;', ('package_level_id', '!=', False), ('parent.picking_type_entire_packs', '=', True)]}"
                           string="Unit of Measure" groups="uom.group_uom"/>
                </tree>
            </field>
        </record>


    </data>
</odoo>